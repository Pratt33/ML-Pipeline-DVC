schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: b6415745e5275dd0114b4ca4625abca1
      size: 260
    outs:
    - path: data/raw/Reviews.csv
      hash: md5
      md5: c3c950ae0be8b0736477c89d052d33fd
      size: 300904694
  data_preprocess:
    cmd: python src/data_preprocess.py
    deps:
    - path: data/raw/Reviews.csv
      hash: md5
      md5: c3c950ae0be8b0736477c89d052d33fd
      size: 300904694
    - path: src/data_preprocess.py
      hash: md5
      md5: 145fa8b4fe24ee232ebad018dc0b5a29
      size: 568
    outs:
    - path: data/processed/processed_reviews.csv
      hash: md5
      md5: d258c2fd2e61dc8b10db50af6b1e1a8e
      size: 283863027
  train_model:
    cmd: python src/training.py
    deps:
    - path: data/processed/processed_reviews.csv
      hash: md5
      md5: d258c2fd2e61dc8b10db50af6b1e1a8e
      size: 283863027
    - path: src/training.py
      hash: md5
      md5: 85873813953ea469722c56052c94a73a
      size: 1561
    params:
      params.yaml:
        train.metric: cosine
        train.min_product_interactions: 5
        train.min_user_interactions: 5
        train.neighbors: 5
    outs:
    - path: models/knn_model.pkl
      hash: md5
      md5: 987974de5c10eafc7913dc9e7a723adb
      size: 3266868951
  evaluate_model:
    cmd: python src/evaluate.py
    deps:
    - path: data/processed/processed_reviews.csv
      hash: md5
      md5: d258c2fd2e61dc8b10db50af6b1e1a8e
      size: 283863027
    - path: models/knn_model.pkl
      hash: md5
      md5: 987974de5c10eafc7913dc9e7a723adb
      size: 3266868951
    - path: src/evaluate.py
      hash: md5
      md5: c4f28e8049c78742cc5bf98a9555114c
      size: 1851
    params:
      params.yaml:
        evaluate.eval_user_count: 50
        evaluate.rating_threshold: 4
        evaluate.top_k: 5
    outs:
    - path: metrics/recall.json
      hash: md5
      md5: 6017a60e2766daa931aa87b35a86bd95
      size: 22
